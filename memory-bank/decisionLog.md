# Decision Log

*   **[2025-06-14]** **Decision:** Successfully resolved cave lighting issue by modifying `LightBlockInternal` to include an `applyWallBoost` parameter (defaulting to true) and calling it with `applyWallBoost = false` during the relighting phase in `RemoveLightSource`. This was the sixth and successful attempt.
    *   **Rationale:** This prevents the `wallLightBoost` from being applied when restoring light levels after a temporary light source is removed, allowing caves to return to their original darkness more accurately.
*   **[2025-06-14]** **Decision:** Created `Assets/Scripts/Ambiance/AmbianceSystemData.cs` containing `BiomeType`, `TimeOfDay` enums and the `AmbianceProfile` ScriptableObject for the dynamic ambiance system.
    *   **Rationale:** To define the necessary data structures for the dynamic ambiance system, allowing for easy configuration of different ambiance settings via ScriptableObjects as per the architectural plan.
*   **[2025-06-14]** **Decision:** Created the initial structural framework for `Assets/Scripts/Ambiance/AmbianceManager.cs`, including Singleton pattern, public fields for configuration and component references, and placeholder methods for core logic.
    *   **Rationale:** To establish the central managing script for the dynamic ambiance system, laying the groundwork for implementing the planned features.
*   **[2025-06-14]** **Decision:** Integrated `AmbianceManager.cs` with real biome and time detection.
    *   **Rationale:** To replace placeholder logic with actual game state detection for dynamic ambiance changes.
    *   **Details:**
        *   `AmbianceManager.GetCurrentBiome()` now calls `TerrainGeneration.GetAmbianceBiomeTypeAtWorldPosition()` (assuming `PlayerController` provides position to `AmbianceManager`).
        *   `AmbianceManager.GetCurrentTimeOfDay()` now calls `DayNightCycleManager.Instance.CurrentAmbianceTime`.
        *   Created `DayNightCycleManager.cs` with a basic structure, initially using a `debugCurrentTime` for manual control.
        *   `AmbianceManager.Start()` updated to include checks for these new dependencies.
        *   Confirmed/implemented `TerrainGeneration.GetAmbianceBiomeTypeAtWorldPosition()` method.
---
*Generated by Roo, the Architect, on 2025-06-14*
*Updated by Roo, the Coder, on 2025-06-14*
*Updated by NexusCore, on 2025-06-14*